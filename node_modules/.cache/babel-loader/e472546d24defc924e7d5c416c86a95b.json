{"ast":null,"code":"import _objectSpread from \"/Users/rishwan/Documents/projects/mediumclone-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport api from '../lib/api';\nimport { push } from 'react-router-redux';\n/**\n * Constants\n */\n\nvar FETCH_ARTICLES_REQUEST = 'FETCH_ARTICLES_REQUEST';\nvar FETCH_ARTICLES_SUCCESS = 'FETCH_ARTICLES_SUCCESS';\nvar FETCH_ARTICLES_FAIL = 'FETCH_ARTICLES_FAIL';\nvar FETCH_TOPICS_SUCCESS = 'FETCH_TOPICS_SUCESS';\nvar FETCH_TOPICS_FAIL = 'FETCH_TOPICS_FAIL';\nvar FETCH_TAGS_SUCCESS = 'FETCH_TAGS_SUCCESS';\nvar FETCH_TAGS_FAIL = 'FETCH_TAGS_FAIL';\nvar CREATE_ARTICLE_REQUEST = 'CREATE_ARTICLE_REQUEST';\nvar CREATE_ARTICLE_SUCCESS = 'CREATE_ARTICLE_SUCCESS';\nvar CREATE_ARTICLE_FAIL = 'CREATE_ARTICLE_FAIL';\nvar DELETE_ARTICLE_SUCCESS = 'DELETE_ARTICLE_SUCCESS';\nvar DELETE_ARTICLE_FAIL = 'DELETE_ARTICLE_FAIL';\n/**\n * Actions\n */\n\nfunction deleteArticleSuccess(data) {\n  console.log('deleteArticleSuccess');\n  return {\n    type: DELETE_ARTICLE_SUCCESS,\n    payload: {\n      articles: data\n    }\n  };\n}\n\nfunction deleteArticleFail() {\n  console.log('deleteArticleFail');\n  return {\n    type: DELETE_ARTICLE_FAIL,\n    payload: {\n      articles: null\n    }\n  };\n}\n\nfunction createArticleRequest() {\n  console.log('createArticleRequest');\n  return {\n    type: CREATE_ARTICLE_REQUEST,\n    payload: {\n      isFetching: true\n    }\n  };\n}\n\nfunction createArticleSuccess(data) {\n  console.log('createArticleSuccess');\n  return {\n    type: CREATE_ARTICLE_SUCCESS,\n    payload: {\n      isFetching: false,\n      article: data.result.article\n    }\n  };\n}\n\nfunction createArticleFail() {\n  console.log('createArticleFail');\n  return {\n    type: CREATE_ARTICLE_FAIL,\n    payload: {\n      isFetching: false,\n      article: null\n    }\n  };\n}\n\nfunction fetchTagsSuccess(data) {\n  console.log('fetchTagsSuccess');\n  return {\n    type: FETCH_TAGS_SUCCESS,\n    payload: {\n      tags: data.result.tags\n    }\n  };\n}\n\nfunction fetchTagsFail() {\n  console.log('fetchTagsFail');\n  return {\n    type: FETCH_TAGS_FAIL,\n    payload: {\n      tags: null\n    }\n  };\n}\n\nfunction fetchTopicsSuccess(data) {\n  console.log('fetchTopicsSuccess');\n  return {\n    type: FETCH_TOPICS_SUCCESS,\n    payload: {\n      topics: data.result.topics\n    }\n  };\n}\n\nfunction fetchTopicsFail() {\n  console.log('fetchTopicsFail');\n  return {\n    type: FETCH_TOPICS_FAIL,\n    payload: {\n      topics: null\n    }\n  };\n}\n\nfunction fetchArticleRequest() {\n  console.log('fetchArticleRequest');\n  return {\n    type: FETCH_ARTICLES_REQUEST,\n    payload: {\n      isFetching: true,\n      articles: null\n    }\n  };\n}\n\nfunction fetchArticlesSuccess(data) {\n  console.log('fetchArticlesSuccess');\n  return {\n    type: FETCH_ARTICLES_SUCCESS,\n    payload: {\n      isFetching: false,\n      articles: data.result.articles\n    }\n  };\n}\n\nfunction fetchArticlesFail() {\n  console.log('fetchArticlesFail');\n  return {\n    type: FETCH_ARTICLES_FAIL,\n    payload: {\n      isFetching: false,\n      articles: null,\n      topics: []\n    }\n  };\n}\n/**\n * Action Dispatchers\n */\n\n\nexport function fetchTags() {\n  return function (dispatch) {\n    api.get('/tags/index').then(function (response) {\n      if (response.data.status === 'ok') {\n        dispatch(fetchTagsSuccess(response.data));\n      } else {\n        dispatch(fetchTagsFail());\n      }\n    }).catch(function (error) {\n      console.log(error);\n      dispatch(fetchTagsFail());\n    });\n  };\n}\nexport function fetchArticles() {\n  return function (dispatch) {\n    dispatch(fetchArticleRequest());\n    api.get('/articles/index').then(function (response) {\n      console.log(response);\n\n      if (response.data.status === 'ok') {\n        dispatch(fetchArticlesSuccess(response.data));\n      } else {\n        dispatch(fetchArticlesFail());\n      }\n    }).catch(function (error) {\n      console.log(error);\n      dispatch(fetchArticlesFail());\n    });\n  };\n}\nexport function fetchTopics() {\n  return function (dispatch) {\n    api.get('/topics/index').then(function (response) {\n      if (response.data.status === 'ok') {\n        console.log(response.data);\n        dispatch(fetchTopicsSuccess(response.data));\n      } else {\n        dispatch(fetchTopicsFail());\n      }\n    }).catch(function (error) {\n      console.log(error);\n      dispatch(fetchTopicsFail());\n    });\n  };\n}\nexport function createArticle(data) {\n  return function (dispatch) {\n    dispatch(createArticleRequest());\n    api.post('/article/store', data).then(function (response) {\n      if (response.data.status === 'ok') {\n        dispatch(createArticleSuccess(response.data));\n        dispatch(push('/article/list'));\n      } else {\n        dispatch(createArticleFail());\n      }\n    }).catch(function (error) {\n      console.log(error);\n      dispatch(createArticleFail());\n    });\n  };\n}\nexport function deleteArticle(articles, article_id) {\n  return function (dispatch) {\n    try {\n      var newArticles = articles.splice();\n      console.log(newArticles);\n      console.log('attempting to delete article id ' + article_id);\n      console.log(newArticles);\n      var delArticleIndex = articles.findIndex(function (article) {\n        return article.id === article_id;\n      });\n      console.log(delArticleIndex);\n      newArticles.splice(delArticleIndex, 1);\n      dispatch(deleteArticleSuccess(newArticles));\n    } catch (err) {\n      dispatch(deleteArticleFail());\n    }\n  };\n}\n/**\n * Reducer\n */\n\nvar initialState = {\n  isFetching: false,\n  articles: null,\n  topics: null,\n  tags: null,\n  serverAlert: {\n    type: null,\n    msg: null,\n    display: false\n  }\n};\nexport default function articleReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case FETCH_ARTICLES_REQUEST:\n      return _objectSpread({}, state, {\n        isFetching: action.payload.isFetching,\n        articles: action.payload.articles\n      });\n\n    case FETCH_ARTICLES_SUCCESS:\n      return _objectSpread({}, state, {\n        isFetching: action.payload.isFetching,\n        articles: action.payload.articles\n      });\n\n    case FETCH_TOPICS_SUCCESS:\n      return _objectSpread({}, state, {\n        topics: action.payload.topics\n      });\n\n    case FETCH_TOPICS_FAIL:\n      return _objectSpread({}, state, {\n        topics: action.payload.topics\n      });\n\n    case FETCH_TAGS_SUCCESS:\n      return _objectSpread({}, state, {\n        tags: action.payload.tags\n      });\n\n    case FETCH_TAGS_FAIL:\n      return _objectSpread({}, state, {\n        tags: action.payload.tags\n      });\n\n    case DELETE_ARTICLE_SUCCESS:\n      return _objectSpread({}, state, {\n        articles: action.payload.articles\n      });\n\n    case DELETE_ARTICLE_FAIL:\n      return _objectSpread({}, state, {\n        articles: action.payload.articles\n      });\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/Users/rishwan/Documents/projects/mediumclone-admin/src/modules/articles.js"],"names":["api","push","FETCH_ARTICLES_REQUEST","FETCH_ARTICLES_SUCCESS","FETCH_ARTICLES_FAIL","FETCH_TOPICS_SUCCESS","FETCH_TOPICS_FAIL","FETCH_TAGS_SUCCESS","FETCH_TAGS_FAIL","CREATE_ARTICLE_REQUEST","CREATE_ARTICLE_SUCCESS","CREATE_ARTICLE_FAIL","DELETE_ARTICLE_SUCCESS","DELETE_ARTICLE_FAIL","deleteArticleSuccess","data","console","log","type","payload","articles","deleteArticleFail","createArticleRequest","isFetching","createArticleSuccess","article","result","createArticleFail","fetchTagsSuccess","tags","fetchTagsFail","fetchTopicsSuccess","topics","fetchTopicsFail","fetchArticleRequest","fetchArticlesSuccess","fetchArticlesFail","fetchTags","dispatch","get","then","response","status","catch","error","fetchArticles","fetchTopics","createArticle","post","deleteArticle","article_id","newArticles","splice","delArticleIndex","findIndex","id","err","initialState","serverAlert","msg","display","articleReducer","state","action"],"mappings":"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","sourcesContent":["import api from '../lib/api'\nimport { push } from 'react-router-redux'\n\n/**\n * Constants\n */\nconst FETCH_ARTICLES_REQUEST = 'FETCH_ARTICLES_REQUEST'\nconst FETCH_ARTICLES_SUCCESS = 'FETCH_ARTICLES_SUCCESS'\nconst FETCH_ARTICLES_FAIL  = 'FETCH_ARTICLES_FAIL'\n\nconst FETCH_TOPICS_SUCCESS = 'FETCH_TOPICS_SUCESS'\nconst FETCH_TOPICS_FAIL = 'FETCH_TOPICS_FAIL'\n\nconst FETCH_TAGS_SUCCESS = 'FETCH_TAGS_SUCCESS'\nconst FETCH_TAGS_FAIL = 'FETCH_TAGS_FAIL'\n\nconst CREATE_ARTICLE_REQUEST = 'CREATE_ARTICLE_REQUEST'\nconst CREATE_ARTICLE_SUCCESS = 'CREATE_ARTICLE_SUCCESS'\nconst CREATE_ARTICLE_FAIL = 'CREATE_ARTICLE_FAIL'\n\nconst DELETE_ARTICLE_SUCCESS = 'DELETE_ARTICLE_SUCCESS'\nconst DELETE_ARTICLE_FAIL = 'DELETE_ARTICLE_FAIL'\n\n\n/**\n * Actions\n */\nfunction deleteArticleSuccess (data) {\n  console.log('deleteArticleSuccess')\n  return {\n    type: DELETE_ARTICLE_SUCCESS,\n    payload: {\n      articles: data\n    }\n  }\n}\n\nfunction deleteArticleFail () {\n  console.log('deleteArticleFail')\n  return {\n    type: DELETE_ARTICLE_FAIL,\n    payload: {\n      articles: null\n    }\n  }\n}\n\nfunction createArticleRequest () {\n  console.log('createArticleRequest')\n  return {\n    type: CREATE_ARTICLE_REQUEST,\n    payload: {\n      isFetching: true\n    }\n  }\n}\n\nfunction createArticleSuccess (data) {\n  console.log('createArticleSuccess')\n  return {\n    type: CREATE_ARTICLE_SUCCESS,\n    payload: {\n      isFetching: false,\n      article: data.result.article\n    }\n  }\n}\n\nfunction createArticleFail () {\n  console.log('createArticleFail')\n  return {\n    type: CREATE_ARTICLE_FAIL,\n    payload: {\n      isFetching: false,\n      article: null\n    }\n  }\n}\n\nfunction fetchTagsSuccess (data) {\n  console.log('fetchTagsSuccess')\n  return {\n    type: FETCH_TAGS_SUCCESS,\n    payload: {\n      tags: data.result.tags\n    }\n  }\n}\n\nfunction fetchTagsFail () {\n  console.log('fetchTagsFail')\n  return {\n    type: FETCH_TAGS_FAIL,\n    payload: {\n      tags: null\n    }\n  }\n}\n\nfunction fetchTopicsSuccess (data) {\n  console.log('fetchTopicsSuccess')\n  return {\n    type: FETCH_TOPICS_SUCCESS,\n    payload: {\n      topics: data.result.topics\n    }\n  }\n}\n\nfunction fetchTopicsFail () {\n  console.log('fetchTopicsFail')\n  return {\n    type: FETCH_TOPICS_FAIL,\n    payload: {\n      topics: null\n    }\n  }\n}\n\nfunction fetchArticleRequest () {\n  console.log('fetchArticleRequest')\n  return {\n    type: FETCH_ARTICLES_REQUEST,\n    payload: {\n      isFetching: true,\n      articles: null\n    }\n  }\n}\n\nfunction fetchArticlesSuccess (data) {\n  console.log('fetchArticlesSuccess')\n  return {\n    type: FETCH_ARTICLES_SUCCESS,\n    payload: {\n      isFetching: false,\n      articles: data.result.articles\n    }\n  }\n}\n\nfunction fetchArticlesFail () {\n  console.log('fetchArticlesFail')\n  return {\n    type: FETCH_ARTICLES_FAIL,\n    payload: {\n      isFetching: false,\n      articles: null,\n      topics: []\n    }\n  }\n}\n\n/**\n * Action Dispatchers\n */\nexport function fetchTags () {\n  return dispatch => {\n    api\n      .get('/tags/index')\n      .then(response => {\n        if (response.data.status === 'ok') {\n          dispatch(fetchTagsSuccess(response.data))\n        } else {\n          dispatch(fetchTagsFail())\n        }\n      })\n      .catch(error => {\n        console.log(error)\n        dispatch(fetchTagsFail())\n      })\n  }\n}\n\nexport function fetchArticles () {\n  return dispatch => {\n    dispatch(fetchArticleRequest())\n    api\n      .get('/articles/index')\n      .then(response => {\n        console.log(response)\n        if (response.data.status === 'ok') {\n          dispatch(fetchArticlesSuccess(response.data))\n        } else {\n          dispatch(fetchArticlesFail())\n        }\n      })\n      .catch(error => {\n        console.log(error)\n        dispatch(fetchArticlesFail())\n      })\n  }\n}\n\nexport function fetchTopics () {\n  return dispatch => {\n    api\n      .get('/topics/index')\n      .then(response => {\n        if (response.data.status === 'ok') {\n          console.log(response.data)\n          dispatch(fetchTopicsSuccess(response.data))\n        } else {\n          dispatch(fetchTopicsFail())\n        }\n      })\n      .catch(error => {\n        console.log(error)\n        dispatch(fetchTopicsFail())\n      })\n  }\n}\n\nexport function createArticle (data) {\n  return dispatch => {\n    dispatch(createArticleRequest())\n    api\n      .post('/article/store', data)\n      .then(response => {\n        if (response.data.status === 'ok') {\n          dispatch(createArticleSuccess(response.data))\n          dispatch(push('/article/list'))\n        } else {\n          dispatch(createArticleFail())\n        }\n      })\n      .catch(error => {\n        console.log(error)\n        dispatch(createArticleFail())\n      })\n  }\n}\n\nexport function deleteArticle (articles, article_id) {\n  return dispatch => {\n    try {\n\n      let newArticles = articles.splice()\n\n      console.log(newArticles)\n\n      console.log('attempting to delete article id ' + article_id)\n      console.log(newArticles)\n\n      let delArticleIndex = articles.findIndex(article => article.id === article_id)\n\n      console.log(delArticleIndex)\n\n      newArticles.splice(delArticleIndex, 1)\n\n      dispatch(deleteArticleSuccess(newArticles))\n    } catch (err) {\n      dispatch(deleteArticleFail())\n    }\n  }\n}\n\n/**\n * Reducer\n */\nconst initialState = {\n  isFetching: false,\n  articles: null,\n  topics: null,\n  tags: null,\n  serverAlert: {\n    type: null,\n    msg: null,\n    display: false\n  }\n}\n\nexport default function articleReducer (state = initialState, action) {\n  switch (action.type) {\n    case FETCH_ARTICLES_REQUEST:\n      return {\n        ...state,\n        isFetching: action.payload.isFetching,\n        articles: action.payload.articles\n      }\n    case FETCH_ARTICLES_SUCCESS:\n      return {\n        ...state,\n        isFetching: action.payload.isFetching,\n        articles: action.payload.articles\n      }\n    case FETCH_TOPICS_SUCCESS:\n      return {\n        ...state,\n        topics: action.payload.topics\n      }\n    case FETCH_TOPICS_FAIL:\n      return {\n        ...state,\n        topics: action.payload.topics\n      }\n    case FETCH_TAGS_SUCCESS:\n      return {\n        ...state,\n        tags: action.payload.tags\n      }\n    case FETCH_TAGS_FAIL:\n      return {\n        ...state,\n        tags: action.payload.tags\n      }\n    case DELETE_ARTICLE_SUCCESS:\n      return {\n        ...state,\n        articles: action.payload.articles\n      }\n    case DELETE_ARTICLE_FAIL:\n      return {\n        ...state,\n        articles: action.payload.articles\n      }\n    default:\n      return state\n  }\n}"]},"metadata":{},"sourceType":"module"}