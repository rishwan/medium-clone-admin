{"ast":null,"code":"import _classCallCheck from \"/Users/rishwan/Documents/projects/mediumclone-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/rishwan/Documents/projects/mediumclone-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/rishwan/Documents/projects/mediumclone-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/rishwan/Documents/projects/mediumclone-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/rishwan/Documents/projects/mediumclone-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/rishwan/Documents/projects/mediumclone-admin/src/pages/article/article_edit/components/ArticleEditForm.js\";\nimport React from 'react';\nimport { Row, Col, Form, Input, Select, Checkbox, Divider, Button, message } from 'antd';\nimport ReactQuill from 'react-quill'; // ES6\n\nimport 'react-quill/dist/quill.snow.css'; // ES6\n\nimport ArticlesContext from '../../ArticlesContext';\nimport ImageUpload from '../../../components/ImageUpload';\nvar FormItem = Form.Item; //const { TextArea } = Input\n\nvar ArticleEditForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ArticleEditForm, _React$Component);\n\n  function ArticleEditForm(props) {\n    var _this;\n\n    _classCallCheck(this, ArticleEditForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ArticleEditForm).call(this, props));\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n\n      _this.props.form.validateFields(function (err, values) {\n        if (!err) {\n          console.log('Received values of form: ', values);\n          var form_data = {\n            article_id: _this.props.articles.article.id,\n            title: _this.props.form.getFieldValue('title'),\n            tag_line: _this.props.form.getFieldValue('tag_line'),\n            body: _this.state.body,\n            article_img: _this.state.article_img,\n            topic: _this.props.form.getFieldValue('topic'),\n            published: _this.state.published,\n            tags: _this.props.form.getFieldValue('tags'),\n            featured: _this.state.featured\n          };\n          console.log(form_data);\n\n          _this.props.articles.createArticle(form_data);\n\n          message.success('Article saved');\n        }\n      });\n    };\n\n    _this.onFileUpload = function (path) {\n      _this.setState({\n        article_img: path\n      });\n    };\n\n    _this.bodyChange = function (value) {\n      _this.setState({\n        body: value\n      });\n    };\n\n    _this.onPublishChange = function (e) {\n      _this.setState({\n        published: e.target.checked\n      });\n    };\n\n    _this.onFeatureChange = function (e) {\n      _this.setState({\n        featured: e.target.checked\n      });\n    };\n\n    _this.state = {\n      article_img: null,\n      body: '',\n      published: false,\n      featured: false\n    };\n    return _this;\n  }\n\n  _createClass(ArticleEditForm, [{\n    key: \"render\",\n    value: function render() {\n      var getFieldDecorator = this.props.form.getFieldDecorator;\n      var _this$props$articles = this.props.articles,\n          topics = _this$props$articles.topics,\n          tags = _this$props$articles.tags,\n          article = _this$props$articles.article;\n\n      if (!topics || !tags || !article) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, \"Loading\");\n      }\n\n      return React.createElement(Form, {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(Row, {\n        gutter: 24,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(Col, {\n        span: 17,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(FormItem, {\n        label: \"Title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, getFieldDecorator('title', {\n        rules: [{\n          required: true,\n          message: \"Article Title...\"\n        }],\n        initialValue: article.title\n      })(React.createElement(Input, {\n        name: \"article_title\",\n        placeholder: \"Title...\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }))), React.createElement(FormItem, {\n        label: \"Tag Line\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, getFieldDecorator('tag_line', {\n        rules: [{\n          required: true,\n          message: \"Tag Line...\"\n        }],\n        initialValue: article.tag_line\n      })(React.createElement(Input, {\n        name: \"tag_line\",\n        placeholder: \"Tag Line...\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }))), React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }), React.createElement(ReactQuill, {\n        className: \"quill-editor\",\n        defaultValue: article.body,\n        onChange: this.bodyChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      })), React.createElement(Col, {\n        span: 7,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(FormItem, {\n        label: \"Topic\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, getFieldDecorator('topic', {\n        rules: [{\n          required: true,\n          message: \"Select a topic...\"\n        }],\n        initialValue: article.topic_id\n      })(React.createElement(Select, {\n        name: \"attribute_type\",\n        onChange: this.handleAttributeChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, topics.map(function (item) {\n        return React.createElement(Select.Option, {\n          key: item.id,\n          value: item.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, item.title);\n      })))), React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Current Feature Image\")), React.createElement(\"img\", {\n        className: \"article-img-edit-preview\",\n        src: article.feature_img_url,\n        alt: article.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"Upload a new Feature Image\")), React.createElement(ImageUpload, {\n        token: this.props.articles.token,\n        onUpload: this.onFileUpload,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }), React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }), React.createElement(FormItem, {\n        label: \"Tags\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, getFieldDecorator('tags', {\n        rules: [{\n          required: true,\n          message: \"apply some tags to this article\"\n        }],\n        initialValue: article.current_tags\n      })(React.createElement(Select, {\n        name: \"tags\",\n        mode: \"tags\",\n        onChange: this.handleAttributeChange,\n        tokenSeparators: [','],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, tags.map(function (item) {\n        return React.createElement(Select.Option, {\n          key: item.id,\n          value: item.name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }, item.name);\n      })))), React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }), React.createElement(Checkbox, {\n        onChange: this.onPublishChange,\n        checked: article.published,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"Publish\"), React.createElement(Checkbox, {\n        onChange: this.onFeatureChange,\n        checked: article.featured,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, \"Featured\"), React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }), React.createElement(Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        className: \"article-save-button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, \"Save\"))));\n    }\n  }]);\n\n  return ArticleEditForm;\n}(React.Component);\n\nvar WrappedForm = Form.create()(ArticleEditForm);\nexport default React.forwardRef(function (props, ref) {\n  return React.createElement(ArticlesContext.Consumer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, function (articles) {\n    return React.createElement(WrappedForm, Object.assign({}, props, {\n      articles: articles,\n      ref: ref,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }));\n  });\n});","map":{"version":3,"sources":["/Users/rishwan/Documents/projects/mediumclone-admin/src/pages/article/article_edit/components/ArticleEditForm.js"],"names":["React","Row","Col","Form","Input","Select","Checkbox","Divider","Button","message","ReactQuill","ArticlesContext","ImageUpload","FormItem","Item","ArticleEditForm","props","handleSubmit","e","preventDefault","form","validateFields","err","values","console","log","form_data","article_id","articles","article","id","title","getFieldValue","tag_line","body","state","article_img","topic","published","tags","featured","createArticle","success","onFileUpload","path","setState","bodyChange","value","onPublishChange","target","checked","onFeatureChange","getFieldDecorator","topics","rules","required","initialValue","topic_id","handleAttributeChange","map","item","feature_img_url","token","current_tags","name","Component","WrappedForm","create","forwardRef","ref"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Row, Col, Form, Input, Select, Checkbox, Divider, Button, message } from 'antd'\nimport ReactQuill from 'react-quill'; // ES6\nimport 'react-quill/dist/quill.snow.css'; // ES6\nimport ArticlesContext from '../../ArticlesContext'\nimport ImageUpload from '../../../components/ImageUpload'\n\nconst FormItem = Form.Item\n//const { TextArea } = Input\n\nclass ArticleEditForm extends React.Component {\n\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      article_img: null,\n      body: '',\n      published: false,\n      featured: false\n    }\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault()\n\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        console.log('Received values of form: ', values)\n\n        let form_data = {\n          article_id: this.props.articles.article.id,\n          title: this.props.form.getFieldValue('title'),\n          tag_line: this.props.form.getFieldValue('tag_line'),\n          body: this.state.body,\n          article_img: this.state.article_img,\n          topic: this.props.form.getFieldValue('topic'),\n          published: this.state.published,\n          tags: this.props.form.getFieldValue('tags'),\n          featured: this.state.featured\n        }\n\n        console.log(form_data)\n        this.props.articles.createArticle(form_data)\n        message.success('Article saved');\n      }\n    });\n  }\n\n  onFileUpload = (path) => {\n    this.setState({article_img: path})\n  }\n\n  bodyChange = (value) => {\n    this.setState({ body: value })\n  }\n\n  onPublishChange = (e) => {\n    this.setState({published: e.target.checked})\n  }\n\n  onFeatureChange = (e) => {\n    this.setState({featured: e.target.checked})\n  }\n\n  render () {\n\n    const { getFieldDecorator } = this.props.form\n    const { topics, tags, article } = this.props.articles\n\n    if(!topics || !tags || !article) {\n      return <div>Loading</div>\n    }\n\n    return (\n      <Form onSubmit={this.handleSubmit}>\n        <Row gutter={24}>\n          <Col span={17}>\n            <FormItem label={\"Title\"}>\n              {getFieldDecorator('title',{\n                rules: [{required: true, message: \"Article Title...\"}],\n                initialValue: article.title\n              })(\n                <Input name={\"article_title\"} placeholder={\"Title...\"}  />\n              )}\n            </FormItem>\n            <FormItem label={\"Tag Line\"}>\n              {getFieldDecorator('tag_line',{\n                rules: [{required: true, message: \"Tag Line...\"}],\n                initialValue: article.tag_line\n              })(\n                <Input name={\"tag_line\"} placeholder={\"Tag Line...\"}  />\n              )}\n            </FormItem>\n            <Divider />\n            <ReactQuill\n              className=\"quill-editor\"\n              defaultValue={article.body}\n              onChange={this.bodyChange} />\n          </Col>\n          <Col span={7}>\n            <FormItem label={\"Topic\"}>\n              {getFieldDecorator('topic',{\n                rules: [{required: true, message: \"Select a topic...\"}],\n                initialValue: article.topic_id\n              })(\n                <Select name={\"attribute_type\"} onChange={this.handleAttributeChange}>\n                  {topics.map(item => (\n                    <Select.Option key={item.id} value={item.id}>\n                      {item.title}\n                    </Select.Option>\n                  ))}\n                </Select>\n              )}\n            </FormItem>\n            <Divider />\n\n            <div className={\"\"}>\n              <p><b>Current Feature Image</b></p>\n              <img className={\"article-img-edit-preview\"} src={article.feature_img_url} alt={article.title} />\n            </div>\n\n            <p><b>Upload a new Feature Image</b></p>\n            <ImageUpload token={this.props.articles.token} onUpload={this.onFileUpload}/>\n            <Divider />\n            <FormItem label={\"Tags\"}>\n              {getFieldDecorator('tags',{\n                rules: [{required: true, message: \"apply some tags to this article\"}],\n                initialValue: article.current_tags\n              })(\n                <Select\n                  name={\"tags\"}\n                  mode=\"tags\"\n                  onChange={this.handleAttributeChange}\n                  tokenSeparators={[',']}\n                >\n                  {tags.map(item => (\n                    <Select.Option key={item.id} value={item.name}>\n                      {item.name}\n                    </Select.Option>\n                  ))}\n                </Select>\n              )}\n            </FormItem>\n            <Divider />\n\n            <Checkbox onChange={this.onPublishChange} checked={article.published}>Publish</Checkbox>\n            <Checkbox onChange={this.onFeatureChange} checked={article.featured}>Featured</Checkbox>\n\n            <Divider />\n            <Button type=\"primary\" htmlType=\"submit\" className={\"article-save-button\"}>\n              Save\n            </Button>\n          </Col>\n        </Row>\n      </Form>\n    )\n  }\n}\n\nconst WrappedForm = Form.create()(ArticleEditForm);\n\nexport default React.forwardRef((props, ref) => (\n  <ArticlesContext.Consumer>\n    {articles => <WrappedForm {...props} articles={articles} ref={ref} />}\n  </ArticlesContext.Consumer>\n))"]},"metadata":{},"sourceType":"module"}